# 🧪 快速测试指南

快速验证本次更新的所有新功能

---

## 🚀 启动服务

所有服务已在后台运行：

```bash
✅ Backend API:      http://localhost:8001
✅ User Frontend:    http://localhost:3000
✅ Admin Frontend:   http://localhost:3002
```

---

## ✅ 测试清单

### 1. 管理员登录验证码功能

**测试步骤：**

1. 打开浏览器访问：http://localhost:3002/login

2. 观察验证码
   - ✅ 页面加载后自动显示验证码图片
   - ✅ 验证码为4位字符（数字+字母）

3. 测试刷新功能
   - ✅ 点击验证码图片
   - ✅ 验证码应该刷新成新的图片

4. 测试错误验证码
   - 输入用户名：`admin`
   - 输入密码：`admin123456`
   - 输入错误的验证码：`AAAA`
   - 点击登录
   - ✅ 应该提示"Invalid or expired captcha code"
   - ✅ 验证码自动刷新

5. 测试正确登录
   - 看清验证码内容（比如 `3B7K`）
   - 输入正确的验证码
   - 点击登录
   - ✅ 应该成功登录并跳转到管理后台首页

---

### 2. 视频详情页 - 收藏功能

**测试步骤：**

1. 打开用户前端：http://localhost:3000

2. 点击任意视频进入详情页

3. 观察标题右侧的收藏按钮
   - ✅ 应该显示一个心形图标

4. 点击收藏按钮
   - ✅ 如果未登录，应该提示需要登录
   - ✅ 如果已登录，心形变红色，提示"已添加到收藏"

5. 再次点击收藏按钮
   - ✅ 心形变回空心，提示"已取消收藏"

**预期效果：**
```
┌──────────────────────────────┐
│ 电影标题              ❤️ [收藏]│
│                              │
└──────────────────────────────┘
```

---

### 3. 视频详情页 - 评分功能

**测试步骤：**

1. 在视频详情页，向下滚动到评分区域

2. 观察评分显示
   - ✅ 应该显示5颗星
   - ✅ 显示平均评分（比如 "8.5/10"）
   - ✅ 显示评分人数

3. 鼠标悬停在星星上
   - ✅ 星星应该高亮显示（预览效果）

4. 点击第4颗星（给8分）
   - ✅ 如果未登录，提示需要登录
   - ✅ 如果已登录，星星填充，提示"评分成功"

5. 刷新页面
   - ✅ 你的评分应该保留

**预期效果：**
```
┌────────────────────────────────┐
│ ⭐⭐⭐⭐⭐                         │
│ 您的评分: ★★★★☆ (8/10)          │
│ 平均评分: 8.5/10 (256人评分)    │
└────────────────────────────────┘
```

---

### 4. 视频详情页 - 评论功能

**测试步骤：**

1. 滚动到评论区

2. 观察评论输入框
   - ✅ 应该有一个文本输入框和"发表评论"按钮

3. 输入评论内容
   - 输入："这部电影太棒了！"
   - 点击"发表评论"
   - ✅ 如果未登录，提示需要登录
   - ✅ 如果已登录，评论应该出现在列表中

4. 回复评论
   - 点击某条评论下的"回复"按钮
   - 输入回复内容
   - 点击发送
   - ✅ 回复应该显示在该评论下方（缩进显示）

5. 点赞评论
   - 点击评论右侧的"👍"图标
   - ✅ 点赞数应该+1
   - ✅ 图标变色（表示已点赞）

**预期效果：**
```
┌────────────────────────────────┐
│ 💬 评论区                       │
│ [输入框: 发表评论...]           │
│ [发表评论]                      │
├────────────────────────────────┤
│ 👤 用户A  2分钟前               │
│ 这部电影太棒了！                │
│ [回复] 👍 10                    │
│   └─ 👤 用户B  1分钟前          │
│      我也这么觉得！              │
│      [回复] 👍 5                │
└────────────────────────────────┘
```

---

### 5. 视频详情页 - 观看历史

**测试步骤：**

1. 在视频详情页播放视频

2. 播放30秒后暂停

3. 刷新页面
   - ✅ 页面加载后，视频应该自动跳转到你上次暂停的位置
   - ✅ 不是从头开始播放

4. 继续播放视频直到接近结束（95%以上）

5. 访问个人中心的观看历史页面
   - ✅ 这个视频应该标记为"已完成"

**预期效果：**
```
第一次观看: 0:00 ━━━━━━━━━━ 2:00:00
播放30秒后: 0:30 ━━●━━━━━━━ 2:00:00

刷新页面后:
自动跳转到: 0:30 ━━●━━━━━━━ 2:00:00
           ↑ 从这里继续播放
```

---

### 6. 视频详情页 - 推荐视频

**测试步骤：**

1. 滚动到页面底部

2. 观察推荐视频区域
   - ✅ 应该显示"Recommended for You"标题
   - ✅ 显示6个视频卡片（网格布局）

3. 观察视频卡片内容
   - ✅ 每个卡片应该显示：
     - 视频海报
     - 标题
     - 评分（星星）
     - 年份
     - 观看量
     - 时长（右下角）

4. 测试卡片交互
   - 鼠标悬停在卡片上
   - ✅ 卡片应该有边框高亮
   - ✅ 海报图片轻微放大
   - ✅ 标题变成蓝色

5. 点击卡片
   - ✅ 应该跳转到该视频的详情页

**预期效果：**
```
┌─────────────────────────────────────────┐
│ 📺 Recommended for You                  │
├──────┬──────┬──────┬──────┬──────┬──────┤
│[视频1]│[视频2]│[视频3]│[视频4]│[视频5]│[视频6]│
│ ⭐8.5 │ ⭐7.8 │ ⭐9.2 │ ⭐8.1 │ ⭐7.5 │ ⭐8.8 │
│ 2024 │ 2023 │ 2024 │ 2023 │ 2024 │ 2023 │
└──────┴──────┴──────┴──────┴──────┴──────┘
```

---

## 🐛 常见问题

### 1. 验证码显示不出来

**检查：**
```bash
# 检查后端是否正常运行
curl http://localhost:8001/health

# 检查验证码API
curl -I http://localhost:8001/api/v1/captcha/
# 应该返回: HTTP/1.1 200 OK 和 X-Captcha-ID header
```

### 2. 评论/评分/收藏提示"需要登录"

这是正常的！需要先登录用户账号：

**用户注册/登录：**
- 访问 http://localhost:3000/register 注册账号
- 或访问 http://localhost:3000/login 登录

**测试账号（如果已创建）：**
- 邮箱：test@example.com
- 密码：test123456

### 3. 观看历史不保存

**检查：**
1. 确保已登录
2. 视频至少播放了30秒（触发第一次保存）
3. 检查浏览器控制台是否有错误

### 4. 推荐视频不显示

**原因：** 可能数据库中没有设置推荐视频

**解决：**
1. 登录管理后台 http://localhost:3002
2. 进入视频管理
3. 编辑几个视频，勾选"推荐"选项
4. 刷新用户前端即可看到推荐视频

---

## 📊 测试检查表

复制到你的笔记中，逐项测试：

```
□ 验证码显示正常
□ 点击验证码可以刷新
□ 错误验证码会提示并刷新
□ 正确验证码可以登录
□ 收藏按钮显示并可点击
□ 收藏状态可以切换
□ 评分星星显示正常
□ 可以点击星星评分
□ 评分后刷新页面保留
□ 评论输入框显示
□ 可以发表评论
□ 可以回复评论
□ 可以点赞评论
□ 视频播放30秒后刷新页面，从上次位置继续
□ 推荐视频显示6个卡片
□ 卡片hover效果正常
□ 点击卡片跳转正确
```

---

## 🎯 快速测试路径

**5分钟快速测试所有功能：**

1. **管理后台登录 (1分钟)**
   - 打开 http://localhost:3002/login
   - 测试验证码刷新
   - 成功登录

2. **用户前端登录 (30秒)**
   - 打开 http://localhost:3000/login
   - 登录或注册账号

3. **视频详情页测试 (3分钟)**
   - 打开任意视频
   - 点击收藏 ✅
   - 点击评分 ✅
   - 发表评论 ✅
   - 播放视频30秒 ✅
   - 刷新页面检查续播 ✅
   - 滚动到底部查看推荐 ✅

4. **完成！** 🎉

---

## 💡 提示

- **最佳测试浏览器：** Chrome / Edge / Firefox
- **建议分辨率：** 1920x1080 或以上
- **打开开发者工具：** F12（查看网络请求和控制台）
- **清除缓存：** Ctrl+Shift+Delete（如果遇到问题）

---

**享受测试！如有问题随时反馈！** 😊
